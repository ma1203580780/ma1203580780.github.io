<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>å¾®ä¿¡å¼€å‘ç¬”è®° | MARTIST</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ï¼š-}">
<meta name="keywords" content="php">
<meta property="og:type" content="article">
<meta property="og:title" content="å¾®ä¿¡å¼€å‘ç¬”è®°">
<meta property="og:url" content="http://martist.cn/2017/11/10/å¾®ä¿¡å¼€å‘ç¬”è®°/index.html">
<meta property="og:site_name" content="MARTIST">
<meta property="og:description" content="ï¼š-}">
<meta property="og:locale" content="ç®€ä½“ä¸­æ–‡">
<meta property="og:image" content="https://raw.githubusercontent.com/ma1203580780/ma1203580780.github.io/master/images/wx1.png">
<meta property="og:image" content="https://raw.githubusercontent.com/ma1203580780/ma1203580780.github.io/master/images/wx2.png">
<meta property="og:image" content="https://raw.githubusercontent.com/ma1203580780/ma1203580780.github.io/master/images/wx3.png">
<meta property="og:image" content="https://raw.githubusercontent.com/ma1203580780/ma1203580780.github.io/master/images/wx4.png">
<meta property="og:updated_time" content="2017-11-17T07:32:33.758Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å¾®ä¿¡å¼€å‘ç¬”è®°">
<meta name="twitter:description" content="ï¼š-}">
<meta name="twitter:image" content="https://raw.githubusercontent.com/ma1203580780/ma1203580780.github.io/master/images/wx1.png">
  
    <link rel="alternate" href="/atom.xml" title="MARTIST" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="æœç´¢"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://martist.cn"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">é¦–é¡µ</a>
        
          <a class="main-nav-link" href="/archives">å½’æ¡£</a>
        
          <a class="main-nav-link" href="/2012/01/01/About Me/">å…³äº</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">MARTIST</a>
      </h1>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-å¾®ä¿¡å¼€å‘ç¬”è®°" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/10/å¾®ä¿¡å¼€å‘ç¬”è®°/" class="article-date">
  <time datetime="2017-11-09T16:00:00.000Z" itemprop="datePublished">2017-11-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      å¾®ä¿¡å¼€å‘ç¬”è®°
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>ï¼š-} <a id="more"></a></p>
<h1 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="headerlink" title="å¼€å‘ç¯å¢ƒ"></a>å¼€å‘ç¯å¢ƒ</h1><h2 id="laravel-5-5-20æ¡†æ¶"><a href="#laravel-5-5-20æ¡†æ¶" class="headerlink" title="laravel 5.5.20æ¡†æ¶"></a>laravel 5.5.20æ¡†æ¶</h2><p>å¯ä»¥ç”¨artisanå‘½ä»¤æŸ¥çœ‹æ¡†æ¶ç‰ˆæœ¬ï¼š</p>
<pre><code>php artisan -V
</code></pre><p><img src="https://raw.githubusercontent.com/ma1203580780/ma1203580780.github.io/master/images/wx1.png" alt=""></p>
<h2 id="composerç»„ä»¶easywechat"><a href="#composerç»„ä»¶easywechat" class="headerlink" title="composerç»„ä»¶easywechat"></a>composerç»„ä»¶easywechat</h2><p>æ­¤å¤„è¦æ³¨æ„ç‰ˆæœ¬ï¼Œæˆ‘ç”¨çš„æ˜¯3.0ï¼Œç»„ä»¶ç‰ˆæœ¬ä¸ç¡®å®šä¼šå‘ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">composer require &quot;overtrue/laravel-wechat:~3.0&quot;</div></pre></td></tr></table></figure>
<p>åœ¨laravelä¸­é…ç½®ï¼š</p>
<p>æ³¨å†Œ ServiceProvider:</p>
<p>Overtrue\LaravelWechat\ServiceProvider::class,</p>
<pre><code>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š
</code></pre><p>php artisan vendor:publish â€“provider=â€Overtrue\LaravelWechat\ServiceProviderâ€</p>
<pre><code>è¯·ä¿®æ”¹åº”ç”¨æ ¹ç›®å½•ä¸‹çš„ config/wechat.php ä¸­å¯¹åº”çš„é¡¹å³å¯ï¼›

ï¼ˆå¯é€‰ï¼‰æ·»åŠ å¤–è§‚åˆ° config/app.php ä¸­çš„ aliases éƒ¨åˆ†:
</code></pre><p>â€˜EasyWeChatâ€™ =&gt; Overtrue\LaravelWechat\Facade::class,</p>
<p>å‚è€ƒï¼š<a href="https://github.com/overtrue/laravel-wechat/tree/3.1.10" target="_blank" rel="external">GitHub - overtrue/laravel-wechat at 3.1.10</a> é…ç½®OAuth ä¸­é—´ä»¶éƒ¨åˆ†ã€‚</p>
<h2 id="vagrant-homesteadè¿è¡Œç¯å¢ƒ"><a href="#vagrant-homesteadè¿è¡Œç¯å¢ƒ" class="headerlink" title="vagrant - homesteadè¿è¡Œç¯å¢ƒ"></a>vagrant - homesteadè¿è¡Œç¯å¢ƒ</h2><h3 id="Homestead-yamlæ–‡ä»¶éƒ¨åˆ†é…ç½®"><a href="#Homestead-yamlæ–‡ä»¶éƒ¨åˆ†é…ç½®" class="headerlink" title="Homestead.yamlæ–‡ä»¶éƒ¨åˆ†é…ç½®"></a>Homestead.yamlæ–‡ä»¶éƒ¨åˆ†é…ç½®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">ip: &quot;192.168.10.10&quot;</div><div class="line">memory: 2048</div><div class="line">cpus: 1</div><div class="line">provider: virtualbox</div><div class="line"></div><div class="line">authorize: ~/.ssh/id_rsa.pub</div><div class="line"></div><div class="line">keys:</div><div class="line">- ~/.ssh/id_rsa</div><div class="line"></div><div class="line">folders:</div><div class="line">- map: /Users/machuang/Code</div><div class="line">to: /home/vagrant/Code</div><div class="line"></div><div class="line">sites:</div><div class="line"># - map: homestead.app</div><div class="line">#   to: /home/vagrant/Code</div><div class="line"># - map: paper.app</div><div class="line">#   to: /home/vagrant/Code/paper/public</div><div class="line">- map: test.app</div><div class="line">to: /home/vagrant/Code/laravel/public</div></pre></td></tr></table></figure>
<h2 id="å†…ç½‘ç©¿é€å·¥å…·-ngrok"><a href="#å†…ç½‘ç©¿é€å·¥å…·-ngrok" class="headerlink" title="å†…ç½‘ç©¿é€å·¥å…·-ngrok"></a>å†…ç½‘ç©¿é€å·¥å…·-ngrok</h2><p>ä½œä¸ºä¸€ä¸ªWebå¼€å‘è€…ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™ä¼šéœ€è¦ä¸´æ—¶åœ°å°†ä¸€ä¸ªæœ¬åœ°çš„Webç½‘ç«™éƒ¨ç½²åˆ°å¤–ç½‘ï¼Œä»¥ä¾›ä»–äººä½“éªŒè¯„ä»·æˆ–ååŠ©è°ƒè¯•ç­‰ç­‰ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šè¿™ä¹ˆåšï¼š</p>
<pre><code>æ‰¾åˆ°ä¸€å°è¿è¡Œäºå¤–ç½‘çš„WebæœåŠ¡å™¨
æœåŠ¡å™¨ä¸Šæœ‰ç½‘ç«™æ‰€éœ€è¦çš„ç¯å¢ƒï¼Œå¦åˆ™è‡ªè¡Œæ­å»º
å°†ç½‘ç«™éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Š
è°ƒè¯•ç»“æŸåï¼Œå†å°†ç½‘ç«™ä»æœåŠ¡å™¨ä¸Šåˆ é™¤
</code></pre><p>åªä¸è¿‡æ˜¯æƒ³å‘æœ‹å‹å±•ç¤ºä¸€ä¸‹ç½‘ç«™è€Œå·²ï¼Œè¦ä¸è¦è¿™ä¹ˆéº»çƒ¦,ä½¿ç”¨ngrokï¼Œå…è´¹çš„æœåŠ¡å°±è¶³å¤Ÿå®ç°å°†ä¸€ä¸ªæœ¬åœ°çš„Webç½‘ç«™ä¸´æ—¶éƒ¨ç½²åˆ°å¤–ç½‘äº†ã€‚</p>
<p><img src="https://raw.githubusercontent.com/ma1203580780/ma1203580780.github.io/master/images/wx2.png" alt=""></p>
<h3 id="å®˜ç½‘"><a href="#å®˜ç½‘" class="headerlink" title="å®˜ç½‘"></a>å®˜ç½‘</h3><p><a href="https://ngrok.com/" target="_blank" rel="external">ngrok</a></p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p> <a href="https://tenten.co/blog/how-to-use-ngrok-to-connect-your-localhost/" target="_blank" rel="external">æ€éº¼å°‡å…§ç¶²çš„ localhost è®“å¤–é¢çš„äººéƒ½çœ‹å¾—åˆ°å‘¢ï¼Ÿç”¨ç”¨ ngrok å§ï¼ - Startup Incubator Asia</a></p>
<p>å»å®˜ç½‘ä¸‹è½½ä¸‹æ¥ï¼Œç„¶åè§£å‹ï¼Œå½“å‰ç›®å½•çš„ ./ngrokæ–‡ä»¶å°±æ˜¯å¯åŠ¨æ–‡ä»¶äº†ï¼Œ</p>
<p>æˆ‘åœ¨/etc/profile å†™äº†ä¸‹åˆ«åï¼Œæ¥ç®€åŒ–æ“ä½œ</p>
<pre><code>alias ngrok=&apos;/Users/machuang/Desktop/ngrok&apos;
</code></pre><p>å…è´¹çš„æ³¨å†Œï¼Œæ¿€æ´»ngrok<br><a href="https://dashboard.ngrok.com/get-started" target="_blank" rel="external">ngrok - secure introspectable tunnels to localhost</a></p>
<p>æ ¹æ®å®˜ç½‘é¡µé¢ç»™çš„å‘½ä»¤å»æ¿€æ´»ä½ çš„ngrokã€‚</p>
<p>å¥½ï¼Œå›åˆ°é¡µé¢æ¥å¯åŠ¨å®ƒï¼Œæ˜ å°„åˆ°æˆ‘çš„homesteadè™šæ‹Ÿæœºçš„ipå’Œç«¯å£å·ã€‚å‘½ä»¤ï¼š</p>
<pre><code>ngrok http 192.168.10.10:80
</code></pre><p>å¦‚æœæ²¡æœ‰æŠ¥é”™,è¯´æ˜è¿è¡Œæ­£å¸¸,è¿™ä¸ªæ—¶å€™,ç»ˆç«¯ä¼šå‡ºç°ä¸‹é¢çš„ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Session Status                online                                            </div><div class="line">Account                       é©¬ é—¯  (Plan: Free)                               </div><div class="line">Version                       2.2.8                                             </div><div class="line">Region                        United States (us)                                </div><div class="line">Web Interface                 http://127.0.0.1:4040                             </div><div class="line">Forwarding                    http://c7971ad2.ngrok.io -&gt; 192.168.10.10:80      </div><div class="line">Forwarding                    https://c7971ad2.ngrok.io -&gt; 192.168.10.10:80     </div><div class="line">                                                                                </div><div class="line">Connections                   ttl     opn     rt1     rt5     p50     p90       </div><div class="line">                              138     0       0.00    0.00    3.47    66.13     </div><div class="line">                                                                                </div><div class="line">HTTP Requests                                                                   </div><div class="line">-------------                                                                   </div><div class="line">                                                                                </div><div class="line">GET  /userInfo                 200 OK                                           </div><div class="line">POST /wechat                   200 OK                                           </div><div class="line">POST /wechat                   200 OK</div></pre></td></tr></table></figure>
<p>3ã€ æµè§ˆå™¨æ‰“å¼€ Webå…¥å£<a href="http://127.0.0.1:4040" target="_blank" rel="external">http://127.0.0.1:4040</a>.  é¡µé¢ä¸Šé¢æŸ¥çœ‹åˆ°å½“å‰è®¿é—®çš„è¯·æ±‚ç»†èŠ‚.</p>
<h2 id="å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•è´¦å·ç”³è¯·"><a href="#å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•è´¦å·ç”³è¯·" class="headerlink" title="å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•è´¦å·ç”³è¯·"></a>å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•è´¦å·ç”³è¯·</h2><p>å¾®ä¿¡å…¬ä¼—å¹³æµ‹è¯•å·ç”³è¯·åœ°å€ï¼š<a href="https://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&amp;t=sandbox/index" target="_blank" rel="external">å¾®ä¿¡å…¬ä¼—å¹³å°</a></p>
<p>éœ€è¦é…ç½®çš„åœ°æ–¹</p>
<p><img src="https://raw.githubusercontent.com/ma1203580780/ma1203580780.github.io/master/images/wx3.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/ma1203580780/ma1203580780.github.io/master/images/wx4.png" alt=""></p>
<p>laravelä»¥å¤–çš„ç”¨æ³•å‚è€ƒï¼š</p>
<p><a href="http://www.thinkphp.cn/code/3553.html" target="_blank" rel="external">Thinkphp5å’ŒEasyWeChatè¿›è¡Œç½‘é¡µæˆæƒç™»å½• - ThinkPHPæ¡†æ¶</a></p>
<h1 id="ğŸ‘Œï¼Œå¼€å‘"><a href="#ğŸ‘Œï¼Œå¼€å‘" class="headerlink" title="ğŸ‘Œï¼Œå¼€å‘"></a>ğŸ‘Œï¼Œå¼€å‘</h1><h2 id="å®šä¹‰è·¯ç”±"><a href="#å®šä¹‰è·¯ç”±" class="headerlink" title="å®šä¹‰è·¯ç”±"></a>å®šä¹‰è·¯ç”±</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;?php</div><div class="line"></div><div class="line">Route::any(&apos;/wechat&apos;, &apos;WeChatController@serve&apos;);</div><div class="line"></div><div class="line">Route::get(&apos;/users&apos;, &apos;WeChatController@users&apos;);</div><div class="line"></div><div class="line">Route::get(&apos;/menu&apos;, &apos;WeChatController@menu&apos;);</div><div class="line"></div><div class="line">Route::get(&apos;/addMenu&apos;, &apos;WeChatController@addMenu&apos;);</div></pre></td></tr></table></figure>
<h2 id="å¤„ç†å¾®ä¿¡çš„è¯·æ±‚æ¶ˆæ¯"><a href="#å¤„ç†å¾®ä¿¡çš„è¯·æ±‚æ¶ˆæ¯" class="headerlink" title="å¤„ç†å¾®ä¿¡çš„è¯·æ±‚æ¶ˆæ¯"></a>å¤„ç†å¾®ä¿¡çš„è¯·æ±‚æ¶ˆæ¯</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * User: maChuang</div><div class="line"> * blog: martist.cn</div><div class="line"> * Date: 2017/11/8</div><div class="line"> * Time: ä¸‹åˆ5:42</div><div class="line"> */</div><div class="line"></div><div class="line">namespace App\Http\Controllers;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">use EasyWeChat\Foundation\Application;</div><div class="line"></div><div class="line">class WeChatController extends Controller</div><div class="line">&#123;</div><div class="line">    public $wechat;</div><div class="line"></div><div class="line">    public function __construct(Application $wechat)</div><div class="line">    &#123;</div><div class="line">        $this-&gt;wechat = $wechat;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * å¤„ç†å¾®ä¿¡çš„è¯·æ±‚æ¶ˆæ¯</div><div class="line">     *</div><div class="line">     * @return string</div><div class="line">     */</div><div class="line">    public function serve()</div><div class="line">    &#123;</div><div class="line">        $wechat = app(&apos;wechat&apos;);</div><div class="line">//        $wechat-&gt;server-&gt;setMessageHandler(function($message)&#123;</div><div class="line">//            return &quot;wocou!!!ï¼&quot;;</div><div class="line">//        &#125;);</div><div class="line">        $userApi = $wechat-&gt;user;</div><div class="line">        $wechat-&gt;server-&gt;setMessageHandler(function ($message) use ($userApi) &#123;</div><div class="line">            switch ($message-&gt;MsgType) &#123;</div><div class="line">                case &apos;event&apos;:</div><div class="line">                    return &apos;æ”¶åˆ°äº‹ä»¶æ¶ˆæ¯&apos;;</div><div class="line">                    break;</div><div class="line">                case &apos;text&apos;:</div><div class="line">                    return $userApi-&gt;get($message-&gt;FromUserName)-&gt;headimgurl;</div><div class="line">                    break;</div><div class="line">                case &apos;image&apos;:</div><div class="line">                    return &apos;æ”¶åˆ°å›¾ç‰‡æ¶ˆæ¯&apos;;</div><div class="line">                    break;</div><div class="line">                case &apos;voice&apos;:</div><div class="line">                    return &apos;æ”¶åˆ°è¯­éŸ³æ¶ˆæ¯&apos;;</div><div class="line">                    break;</div><div class="line">                case &apos;video&apos;:</div><div class="line">                    return &apos;æ”¶åˆ°è§†é¢‘æ¶ˆæ¯&apos;;</div><div class="line">                    break;</div><div class="line">                case &apos;location&apos;:</div><div class="line">                    return &apos;æ”¶åˆ°åæ ‡æ¶ˆæ¯&apos;;</div><div class="line">                    break;</div><div class="line">                case &apos;link&apos;:</div><div class="line">                    return &apos;æ”¶åˆ°é“¾æ¥æ¶ˆæ¯&apos;;</div><div class="line">                    break;</div><div class="line">                // ... å…¶å®ƒæ¶ˆæ¯</div><div class="line">                default:</div><div class="line">                    return &apos;æ”¶åˆ°å…¶å®ƒæ¶ˆæ¯&apos;;</div><div class="line">                    break;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        return $wechat-&gt;server-&gt;serve();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * User: maChuang</div><div class="line">     * @return \EasyWeChat\Support\Collection</div><div class="line">     * å½“å‰å…¬ä¼—å·çš„å…³æ³¨è€…åˆ—è¡¨</div><div class="line">     */</div><div class="line">    public function users()</div><div class="line">    &#123;</div><div class="line">        return $this-&gt;wechat-&gt;user-&gt;lists();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    /**</div><div class="line">     * User: maChuang</div><div class="line">     * å±•ç¤ºèœå•</div><div class="line">     */</div><div class="line">    public function menu()</div><div class="line">    &#123;</div><div class="line">        $app = $this-&gt;wechat;</div><div class="line">        $menu = $app-&gt;menu;</div><div class="line">        $menus = $menu-&gt;all();</div><div class="line">        dd($menus);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * User: maChuang</div><div class="line">     * @return \EasyWeChat\Support\Collection</div><div class="line">     * æ·»åŠ èœå•</div><div class="line">     */</div><div class="line">    public function addMenu()</div><div class="line">    &#123;</div><div class="line">        $app = $this-&gt;wechat;</div><div class="line">        $menu = $app-&gt;menu;</div><div class="line">        $buttons = [</div><div class="line">            [</div><div class="line">                &quot;type&quot; =&gt; &quot;view&quot;,</div><div class="line">                &quot;name&quot; =&gt; &quot;æˆæƒ&quot;,</div><div class="line">                &quot;url&quot;  =&gt; &quot;http://c7971ad2.ngrok.io/scopes&quot;</div><div class="line">            ],</div><div class="line">            [</div><div class="line">                &quot;name&quot;       =&gt; &quot;äºŒçº§èœå•&quot;,</div><div class="line">                &quot;sub_button&quot; =&gt; [</div><div class="line">                    [</div><div class="line">                        &quot;type&quot; =&gt; &quot;view&quot;,</div><div class="line">                        &quot;name&quot; =&gt; &quot;æˆ‘çš„ä¿¡æ¯&quot;,</div><div class="line">                        &quot;url&quot;  =&gt; &quot;http://c7971ad2.ngrok.io/userInfo&quot;,</div><div class="line">                    ],</div><div class="line">                    [</div><div class="line">                        &quot;type&quot; =&gt; &quot;view&quot;,</div><div class="line">                        &quot;name&quot; =&gt; &quot;å¤§å¤§å¤§&quot;,</div><div class="line">                        &quot;url&quot;  =&gt; &quot;http://c7971ad2.ngrok.io/large&quot;,</div><div class="line">                    ],</div><div class="line">                    [</div><div class="line">                        &quot;type&quot; =&gt; &quot;click&quot;,</div><div class="line">                        &quot;name&quot; =&gt; &quot;å°å°å°&quot;,</div><div class="line">                        &quot;key&quot; =&gt; &quot;ASDZFE&quot;</div><div class="line">                    ],</div><div class="line">                ],</div><div class="line">            ],</div><div class="line">        ];</div><div class="line">        $res = $menu-&gt;add($buttons);</div><div class="line">        return $res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œä½ å¯ä»¥åœ¨å…¬ä¼—å·å‘ç°æ·»åŠ è‡ªå®šä¹‰èœå•ï¼ŒæŸ¥çœ‹èœå•ï¼ŒæŸ¥çœ‹å…¬ä¼—å·å…³æ³¨è€…ï¼Œå›å¤ä¿¡æ¯ç­‰åŠŸèƒ½å·²ç»ç®€å•çš„å®ç°äº†ã€‚</p>
<h2 id="è·å–ç”¨æˆ·çš„openidå’Œå¾®ä¿¡ä¿¡æ¯"><a href="#è·å–ç”¨æˆ·çš„openidå’Œå¾®ä¿¡ä¿¡æ¯" class="headerlink" title="è·å–ç”¨æˆ·çš„openidå’Œå¾®ä¿¡ä¿¡æ¯"></a>è·å–ç”¨æˆ·çš„openidå’Œå¾®ä¿¡ä¿¡æ¯</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Route::group([&apos;middleware&apos; =&gt; [&apos;wechat.oauth&apos;]], function () &#123;</div><div class="line"></div><div class="line">    Route::get(&apos;/userInfo&apos;, function () &#123;</div><div class="line">        $user = session(&apos;wechat.oauth_user&apos;); // æ‹¿åˆ°æˆæƒç”¨æˆ·èµ„æ–™</div><div class="line">        dd($user);</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="è¿”å›ç»“æœ"><a href="#è¿”å›ç»“æœ" class="headerlink" title="è¿”å›ç»“æœ"></a>è¿”å›ç»“æœ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    &quot;subscribe&quot;: 1,</div><div class="line">    &quot;openid&quot;: &quot;oCf0jw4DhUXmv6ZhITtBRFn3yLM4&quot;,</div><div class="line">    &quot;nickname&quot;: &quot;ğŸ—martist.cné©¬é—¯ğŸ—&quot;,</div><div class="line">    &quot;sex&quot;: 1,</div><div class="line">    &quot;language&quot;: &quot;zh_CN&quot;,</div><div class="line">    &quot;city&quot;: &quot;çŸ³å®¶åº„&quot;,</div><div class="line">    &quot;province&quot;: &quot;æ²³åŒ—&quot;,</div><div class="line">    &quot;country&quot;: &quot;ä¸­å›½&quot;,</div><div class="line">    &quot;headimgurl&quot;: &quot;http://wx.qlogo.cn/mmopen/9VvH5ZWanZUKiaGbMrMsWeyl1E4yFWJCic5iblA5FSyVcYSPjkUElLsHO697rFgv81DibzNjeVicpTUEruEg3Nbfn7YTDWoquz78f/0&quot;,</div><div class="line">    &quot;subscribe_time&quot;: 1510198660,</div><div class="line">    &quot;remark&quot;: &quot;&quot;,</div><div class="line">    &quot;groupid&quot;: 0,</div><div class="line">    &quot;tagid_list&quot;: []</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å…¶ä»–æ“ä½œå¯ä»¥å…·ä½“å‚è§å¾®ä¿¡å…¬ä¼—å·å®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘åœ¨åšå¾®ä¿¡å¼€å‘å’Œå¾®ä¿¡æ”¯ä»˜éƒ½æ˜¯åŸºäºeastWeChatè¿™ä¸ªç»„ä»¶å®Œæˆçš„ï¼ŒèŠ‚çœäº†å¾ˆå¤šæ—¶é—´ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://martist.cn/2017/11/10/å¾®ä¿¡å¼€å‘ç¬”è®°/" data-id="cjg20644y006jbd2nn2g55fgr" class="article-share-link">åˆ†äº«</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>

    </footer>
  </div>
  
    
    
<nav id="article-nav">
  
    <a href="/2017/11/11/laravelä½¿ç”¨å¤šä¸ªæ•°æ®åº“è¿æ¥/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
      <div class="article-nav-title">
        
          laravelä½¿ç”¨å¤šä¸ªæ•°æ®åº“è¿æ¥
        
      </div>
    </a>
  
  
    <a href="/2017/11/07/è®°ä¸€æ¬¡éƒ¨ç½²nodeé¡¹ç›®åˆ°centosæœåŠ¡å™¨ç»å†/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
      <div class="article-nav-title">è®°ä¸€æ¬¡éƒ¨ç½²nodeé¡¹ç›®åˆ°centosæœåŠ¡å™¨ç»å†</div>
    </a>
  
</nav>

  
</article>
 
     
  <div class="comments" id="comments">
    
     
       
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
       
            <div id="SOHUCS" sid="2017/11/10/å¾®ä¿¡å¼€å‘ç¬”è®°/"> </div>
    
      
      
  </div>
 
  

</section>
           
    <aside id="sidebar">
  
    

  
    
    <div class="widget-wrap">
    
      <div class="widget" id="toc-widget-fixed">
      
        <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
        <div class="toc-widget-list">
              <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#å¼€å‘ç¯å¢ƒ"><span class="toc-number">1.</span> <span class="toc-text">å¼€å‘ç¯å¢ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#laravel-5-5-20æ¡†æ¶"><span class="toc-number">1.1.</span> <span class="toc-text">laravel 5.5.20æ¡†æ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#composerç»„ä»¶easywechat"><span class="toc-number">1.2.</span> <span class="toc-text">composerç»„ä»¶easywechat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vagrant-homesteadè¿è¡Œç¯å¢ƒ"><span class="toc-number">1.3.</span> <span class="toc-text">vagrant - homesteadè¿è¡Œç¯å¢ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Homestead-yamlæ–‡ä»¶éƒ¨åˆ†é…ç½®"><span class="toc-number">1.3.1.</span> <span class="toc-text">Homestead.yamlæ–‡ä»¶éƒ¨åˆ†é…ç½®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å†…ç½‘ç©¿é€å·¥å…·-ngrok"><span class="toc-number">1.4.</span> <span class="toc-text">å†…ç½‘ç©¿é€å·¥å…·-ngrok</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å®˜ç½‘"><span class="toc-number">1.4.1.</span> <span class="toc-text">å®˜ç½‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å‚è€ƒ"><span class="toc-number">1.4.2.</span> <span class="toc-text">å‚è€ƒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•è´¦å·ç”³è¯·"><span class="toc-number">1.5.</span> <span class="toc-text">å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•è´¦å·ç”³è¯·</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ğŸ‘Œï¼Œå¼€å‘"><span class="toc-number">2.</span> <span class="toc-text">ğŸ‘Œï¼Œå¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#å®šä¹‰è·¯ç”±"><span class="toc-number">2.1.</span> <span class="toc-text">å®šä¹‰è·¯ç”±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¤„ç†å¾®ä¿¡çš„è¯·æ±‚æ¶ˆæ¯"><span class="toc-number">2.2.</span> <span class="toc-text">å¤„ç†å¾®ä¿¡çš„è¯·æ±‚æ¶ˆæ¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è·å–ç”¨æˆ·çš„openidå’Œå¾®ä¿¡ä¿¡æ¯"><span class="toc-number">2.3.</span> <span class="toc-text">è·å–ç”¨æˆ·çš„openidå’Œå¾®ä¿¡ä¿¡æ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#è¿”å›ç»“æœ"><span class="toc-number">2.3.1.</span> <span class="toc-text">è¿”å›ç»“æœ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-number">2.4.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></li></ol>
          </div>
      </div>
    </div>

  
    

  
    
  
    
  
    

  
    
  
    <!--å¾®ä¿¡å…¬ä¼—å·äºŒç»´ç -->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2018 martist.cn&nbsp;|&nbsp;
      ä¸»é¢˜ <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      è”ç³»æ–¹å¼&nbsp;|&nbsp;marteeet@gmail.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">é¦–é¡µ</a>
  
    <a href="/archives" class="mobile-nav-link">å½’æ¡£</a>
  
    <a href="/2012/01/01/About Me/" class="mobile-nav-link">å…³äº</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      



<script type="text/javascript ">
    (function () {
        var appid = 'cytf1deXv';
        var conf = '6867419241543404b6c287f39f49f3ca';
        var width = window.innerWidth || document.documentElement.clientWidth;
        if (width < 960) {
            window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="http://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>');
        } else {
            var loadJs = function (d, a) {
                var c = document.getElementsByTagName("head")[0] || document.head || document.documentElement;
                var b = document.createElement("script");
                b.setAttribute("type", "text/javascript");
                b.setAttribute("charset", "UTF-8");
                b.setAttribute("src", d);
                if (typeof a === "function") {
                    if (window.attachEvent) {
                        b.onreadystatechange = function () {
                            var e = b.readyState;
                            if (e === "loaded" || e === "complete") {
                                b.onreadystatechange = null;
                                a()
                            }
                        }
                    } else {
                        b.onload = a
                    }
                }
                c.appendChild(b)
            };
            loadJs("http://changyan.sohu.com/upload/changyan.js", function () {
                window.changyan.api.config({
                    appid: appid,
                    conf: conf
                })
            });
        }
    })();
</script>








<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>